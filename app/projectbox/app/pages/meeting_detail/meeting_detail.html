<ActionBar title="">
    <GridLayout rows="*,*,*" columns="*" class="padding-right-10">
        <Label class="fa" (tap)="cancel()" [text]="'fa-times' | fonticon" ios:horizontalAlignment="left"
               android:horizontalAlignment="left" row="0" col="0"></Label>
        <Label text="Meetings" class="nav-h3" row="0" col="1"></Label>
        <Label class="fa" (tap)="updateMeeting()" [text]="'fa-floppy-o' | fonticon" ios:horizontalAlignment="right"
               android:horizontalAlignment="right" row="0" col="2"></Label>
    </GridLayout>
</ActionBar>
<ScrollView tkMainContent orientation="vertical" isEnabled="true" width="100%" height="100%">
    <AbsoluteLayout>
        <StackLayout class="page" width="100%">
            <!--<StackLayout orientation="horizontal" horizontalAlignment="right">
                <Button class="btn btn-primary btn-active" (tap)="openCamera()" text="Abbrechen"></Button>
                <Button class="btn btn-primary btn-active" (tap)="uploadFile()" text="Aktualisieren"></Button>
            </StackLayout>-->
            <GridLayout rows="auto, *">
                <StackLayout class="form-taskticket" row="1">
                    <!--<Label class="fa" [text]="'fa-angle-down' | fonticon" (tap)="cancel()"
                           horizontalAlignment="center"></Label>-->
                    <Label class="h5" text="Titel"></Label>
                    <TextField class="textfield" [(ngModel)]="meeting.name"></TextField>
                    <Label class="h5" text="Datum"></Label>
                    <TextField class="textfield" (tap)="selectDate()" [text]="date"></TextField>
                    <!--<TextField class="textfield" [(ngModel)]="meeting.date"></TextField>-->
                    <GridLayout columns="*,*" rows="*,*">
                        <Label class="h5" text="Beginn" col="0" row="0"></Label>
                        <!--<TextField class="textfield" [(ngModel)]="meeting.date" col="0" row="1"
                                   style="margin-right:5;"></TextField>-->
                        <TextField class="textfield margin-right-5" (tap)="selectTime()" [text]="time" col="0" row="1"></TextField>
                        <Label class="h5" text="Dauer (Minuten)" col="1" row="0"></Label>
                        <TextField class="textfield" keyboardType="number" [(ngModel)]="meeting.duration" col="1" row="1"></TextField>
                    </GridLayout>
                    <Label class="h5" text="Projekt"></Label>
                    <DropDown #dd
                              style="padding: 5;font-size: 15;background-color: #EBEBEB;margin-bottom:15;"
                              [items]="projectNames"
                              [(ngModel)]="projectSelection"
                              (opened)="onopen()"
                              (closed)="onclose()"></DropDown>
                    <Label class="h5" text="TEILNEHMER"></Label>
                    <TextField class="textfield" [(ngModel)]="attendeesString"></TextField>
                    <Label class="field-seperator margin-topbot-10" height="1"></Label>
                    <GridLayout columns="*,*,*" rows="*,*">
                        <Image [src]="meeting_tabs == 'agenda' ? '~/images/agenda_t.png' : '~/images/agenda_g.png'" (tap)="state('agenda')" row="0" col="0" width="20"
                               height="20" stretch="aspectFit"></Image>
                        <Image [src]="meeting_tabs == 'protokoll' ? '~/images/protokoll_t.png' : '~/images/protokoll_g.png'" (tap)="state('protokoll')" row="0" col="1" width="40"
                               height="20" stretch="aspectFit"></Image>
                        <Image [src]="meeting_tabs == 'files' ? '~/images/files_g.png' : '~/images/files_t.png'" (tap)="state('files')" row="0" col="2" width="40"
                               height="20"
                               stretch="aspectFit"></Image>
                        <Label class="h4" text="Agenda" [style.color]="meeting_tabs == 'agenda' ? '#03A698' : '#222222'" col="0" row="1" horizontalAlignment="center"
                               (tap)="state('agenda')"></Label>
                        <Label class="h4" text="Protokoll" [style.color]="meeting_tabs == 'protokoll' ? '#03A698' : '#222222'" col="1" row="1" horizontalAlignment="center"
                               (tap)="state('protokoll')"></Label>
                        <Label class="h4" text="Files" [style.color]="meeting_tabs == 'files' ? '#03A698' : '#222222'" col="2" row="1" horizontalAlignment="center"
                               (tap)="state('files')"></Label>
                    </GridLayout>
                    <Label class="field-seperator margin-topbot-10" height="1"></Label>
                        <StackLayout [ngSwitch]="meeting_tabs">
                            <StackLayout *ngSwitchCase="'agenda'">
                                <StackLayout orientation="horizontal" horizontalAlignment="center" (tap)="addPoint()">
                                    <FAB icon="~/images/hinzufuegen2.png" rippleColor="#f1f1f1" class="fab-button margin-15"></FAB>
                                    <Label verticalAlignment="center" class="h4" text="Agendapunkt hinzufÃ¼gen"></Label>
                                </StackLayout>
                                <GridLayout columns="auto,*,auto,auto" rows="auto,auto" *ngFor="let point of meeting.agenda">
                                    <FAB icon="~/images/delete.png" rowSpan="2"
                                         col="0" rippleColor="#f1f1f1"
                                         class="fab-button-red margin-10" verticalAlignment="center"></FAB>
                                    <TextField class="textfield  margin-right-5" hint="Agendapunkt" [(ngModel)]="point.topic" col="1" row="0"></TextField>
                                    <TextField class="textfield" hint="Dauer" keyboardType="number" [(ngModel)]="point.duration" col="2" row="0"></TextField>
                                    <TextField class="textfield" hint="Verantwortlicher" [(ngModel)]="point.responsible" col="1" colSpan="2" row="1"></TextField>
                                </GridLayout>
                            </StackLayout>
                            <StackLayout *ngSwitchCase="'files'">
                                <StackLayout orientation="horizontal" horizontalAlignment="center" (tap)="sourcepic()">
                                    <FAB icon="~/images/photo-camera.png"  rippleColor="#f1f1f1"
                                         class="fab-button margin-15" (tap)="sourcepic()"></FAB>
                                    <Label verticalAlignment="center" class="h4" text="Foto hochladen" (tap)="sourcepic()"></Label>
                                </StackLayout>
                                <GridLayout columns="auto,*" rows="*,*" *ngFor="let file of userFiles"
                                            style="padding:5; margin-top: 10;">
                                    <Image (tap)="showImage(file.imagesrc)" src="~/images/picture_file.png" rowSpan="2" col="0"
                                           width="40" height="40"></Image> <!-- [src]=filetype? picture : document -->
                                    <Label [text]="file.name" row="0" col="1" verticalAlignment="center"
                                           style="padding:5;"></Label>
                                    <!--<Label [text]="imagefile.name"></Label>-->
                                    <Label [text]="file.size + ' Bytes'" row="1" col="1" verticalAlignment="center"
                                           style="padding:5;"></Label>
                                </GridLayout>
                            </StackLayout>
                            <StackLayout *ngSwitchCase="'protokoll'">
                                <TextView  style="margin-top: 15px"  height="500px"  [(ngModel)]="meeting.protocol" hint="Inhalt vom Protokoll eingeben"  returnKeyType="send" class="input"></TextView>
                            </StackLayout>
                        </StackLayout>
                </StackLayout>
            </GridLayout>
        </StackLayout>
    </AbsoluteLayout>
</ScrollView>