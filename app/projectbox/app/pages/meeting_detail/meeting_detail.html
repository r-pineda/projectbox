<Page xmlns:dd="nativescript-drop-down">
    <ActionBar title="">
        <NavigationButton text="Sandwich-Bar" android.systemIcon="ic_menu_moreoverflow"
                          (tap)="openDrawer()"></NavigationButton>
        <StackLayout orientation="horizontal" ios:horizontalAlignment="center" android:horizontalAlignment="center">
            <Label text="Meeting - Detailansicht" class="action-label nav-h3"></Label>
        </StackLayout>
        <ActionItem (tap)="cr_ticket()" android.systemIcon="ic_menu_add" ios.systemIcon="4"
                    ios.position="right"></ActionItem>
    </ActionBar>
    <ScrollView tkMainContent orientation="vertical" isEnabled="true" width="100%" height="100%">
        <AbsoluteLayout>
            <StackLayout class="page" width="100%">
                <!--<StackLayout orientation="horizontal" horizontalAlignment="right">
                    <Button class="btn btn-primary btn-active" (tap)="openCamera()" text="Abbrechen"></Button>
                    <Button class="btn btn-primary btn-active" (tap)="uploadFile()" text="Aktualisieren"></Button>
                </StackLayout>-->
                <GridLayout rows="auto, *">
                <StackLayout class="form-taskticket" row="1">
                    <Label class="fa" [text]="'fa-angle-down' | fonticon" (tap)="cancel()"
                           horizontalAlignment="center"></Label>
                    <Label class="h5" text="TITEL"></Label>
                    <TextField class="textfield" [(ngModel)]="meeting.name"></TextField>
                    <Label class="h5" text="DATUM"></Label>
                    <TextField class="textfield" [(ngModel)]="meeting.date"></TextField>
                    <GridLayout columns="*,*" rows="*,*">
                        <Label class="h5" text="BEGINN" col="0" row="0"></Label>
                        <TextField class="textfield" [(ngModel)]="meeting.date" col="0" row="1"
                                   style="margin-right:5;"></TextField>
                        <Label class="h5" text="ENDE" col="1" row="0"></Label>
                        <TextField class="textfield" [(ngModel)]="meeting.date" col="1" row="1"></TextField>
                    </GridLayout>
                    <Label class="h5" text="PROJEKT"></Label>
                    <!--<TextField class="textfield" [(ngModel)]="meeting.project"></TextField>-->
                    <DropDown #dd
                              style="padding: 5;font-size: 15;background-color: #EBEBEB;margin-bottom:15;"
                              [items]="items"
                              [(ngModel)]="selectedIndex"
                              (selectedIndexChanged)="onchange($event)"
                              (opened)="onopen()"
                              (closed)="onclose()"></DropDown>
                    <Label class="h5" text="TEILNEHMER"></Label>
                    <TextField class="textfield" [(ngModel)]="meeting.attendees"></TextField>
                    <Label class="hr"></Label>
                    <GridLayout columns="*,*,*" rows="*,*">
                        <Image src="~/images/timetracking.png" (tap)="state('agenda')" row="0" col="0" width="20"
                               height="20" stretch="aspectFit"></Image>
                        <Image src="~/images/kommentare.png" (tap)="state('protokoll')" row="0" col="1" width="40"
                               height="20" stretch="aspectFit"></Image>
                        <Image src="~/images/kommentare.png" (tap)="state('files')" row="0" col="2" width="40"
                               height="20"
                               stretch="aspectFit"></Image>
                        <Label class="h4" text="Agenda" col="0" row="1" horizontalAlignment="center"
                               (tap)="state('agenda')"></Label>
                        <Label class="h4" text="Kommentare" col="1" row="1" horizontalAlignment="center"
                               (tap)="state('protokoll')"></Label>
                        <Label class="h4" text="Files" col="2" row="1" horizontalAlignment="center"
                               (tap)="state('files')"></Label>
                    </GridLayout>
                    <Label class="hr"></Label>
                    <StackLayout [ngSwitch]="meeting_tabs">
                        <StackLayout *ngSwitchCase="'agenda'">
                            <StackLayout>
                                <GridLayout rows="*,*" columns="*,*, auto">
                                    <TextView hint="Agendapunkt" class="textfield agenda" row="0"
                                              colSpan="2"></TextView>
                                    <TextView hint="Verantwortlicher" class="textfield agenda" row="1" col="0"
                                              style="margin-right:5;"></TextView>
                                    <TextView hint="Dauer" class="textfield agenda" row="1" col="1"></TextView>
                                    <StackLayout class="btn-img" col="2" rowSpan="2" width="20" height="20">
                                        <Image src="~/images/abbrechen2.png"
                                               stretch="aspectFit"></Image>
                                    </StackLayout>
                                </GridLayout>
                            </StackLayout>
                        </StackLayout>
                        <StackLayout *ngSwitchCase="'protokoll'">
                            <StackLayout class="tabs">
                                <GridLayout rows="auto, auto" columns="auto, *">
                                    <StackLayout class="btn-img" row="0" col="0" verticalAlignment="center">
                                        <Image src="~/images/abbrechen2.png" width="20" height="20"
                                               stretch="aspectFit" verticalAlignment="center"></Image>
                                    </StackLayout>
                                    <TextView text="MANUEL GAFOZ Neue DEADLINE: Ende Jänner" editable="false"
                                              textWrap="true"
                                              class="longtext h4" col="1"
                                              row="0"></TextView>
                                    <Label text="16. Oktober 2017 um 16:35" col="1" row="1"></Label>
                                </GridLayout>
                            </StackLayout>
                            <StackLayout class="tabs">
                                <GridLayout rows="auto, auto" columns="auto, *">
                                    <StackLayout class="btn-img" row="0" col="0" verticalAlignment="center">
                                        <Image src="~/images/abbrechen2.png" width="20" height="20"
                                               stretch="aspectFit" verticalAlignment="center"></Image>
                                    </StackLayout>
                                    <TextView text="MANUEL GAFOZ Neue DEADLINE: Ende Jänner" editable="false"
                                              textWrap="true"
                                              class="longtext h4" col="1"
                                              row="0"></TextView>
                                    <Label text="16. Oktober 2017 um 16:35" col="1" row="1"></Label>
                                </GridLayout>
                            </StackLayout>
                            <StackLayout class="tabs">
                                <GridLayout rows="auto, auto" columns="auto, *">
                                    <StackLayout class="btn-img" row="0" col="0" verticalAlignment="center">
                                        <Image src="~/images/abbrechen2.png" width="20" height="20"
                                               stretch="aspectFit" verticalAlignment="center"></Image>
                                    </StackLayout>
                                    <TextView text="MANUEL GAFOZ Neue DEADLINE: Ende Jänner" editable="false"
                                              textWrap="true"
                                              class="longtext h4" col="1"
                                              row="0"></TextView>
                                    <Label text="16. Oktober 2017 um 16:35" col="1" row="1"></Label>
                                </GridLayout>
                            </StackLayout>
                            <GridLayout rows="*" columns="auto,*,auto" orientation="horizontal">
                                <StackLayout class="btn-img" row="0" col="0">
                                    <Image src="~/images/abbrechen2.png" width="20" height="20"
                                           stretch="aspectFit"></Image>
                                </StackLayout>
                                <TextView hint="Kommentieren" class="textfield" row="0" col="1"></TextView>
                                <StackLayout class="btn-img" (tap)="submit()" row="0" col="2">
                                    <Image src="~/images/send.png" width="20" height="20" stretch="aspectFit"></Image>
                                </StackLayout>
                            </GridLayout>
                        </StackLayout>
                        <StackLayout *ngSwitchCase="'files'">
                            <Button (tap)="openCamera()">Take a photo</Button>
                            <Button (tap)="openGallery()">Select an image from Gallery</Button>
                            <GridLayout columns="auto,*" rows="*,*" *ngFor="let file of userFiles">
                                <Image (tap)="showImage(file.imagesrc)" [src]="file.imagesrc" rowSpan="2" col="0"
                                       width="100" height="100"></Image>
                                <Label [text]="file.name" row="0" col="1"></Label>
                                <!--<Label [text]="imagefile.name"></Label>-->
                                <Label [text]="file.size" row="1" col="1"></Label>
                            </GridLayout>
                        </StackLayout>
                    </StackLayout>
                    <StackLayout orientation="horizontal">
                        <FAB icon="~/images/abbrechen2.png" (tap)="cancel()" rippleColor="#f1f1f1"
                             class="fab-button"></FAB>
                        <FAB icon="~/images/save.png" rippleColor="#f1f1f1" (tap)="update()"
                             class="fab-button"></FAB>
                    </StackLayout>
                </StackLayout>
                </GridLayout>
            </StackLayout>
        </AbsoluteLayout>
    </ScrollView>
</Page>