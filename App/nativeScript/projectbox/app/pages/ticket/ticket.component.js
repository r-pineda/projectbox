"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var router_1 = require("@angular/router");
var router_2 = require("nativescript-angular/router");
var page_1 = require("ui/page");
var status_service_1 = require("../../shared/status/status.service");
var todo_service_1 = require("../../shared/todo/todo.service");
var TodoComponent = (function () {
    //Ebene 1 des Arrays ist assoziativ mit den IDs von den Todos. die 2. Ebene enth√§lt folgende Attribute:
    //[0]startTime: Stunden
    //[1]startTime: Minuten
    //[2]startTime: Sekunden
    //[3]endTime: Stunden
    //[4]endTime: Minuten
    //[5]endTime: Sekunden
    //[6]errechnete dauer des Eintrags
    //[7]TimerRunning :0 = false, 1 = true
    function TodoComponent(router, routerExtensions, activatedRoute, statusService, todoService, page) {
        this.router = router;
        this.routerExtensions = routerExtensions;
        this.activatedRoute = activatedRoute;
        this.statusService = statusService;
        this.todoService = todoService;
        this.page = page;
        page.actionBarHidden = true;
    }
    TodoComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.todos = this.todoService.todosDummy();
        this.temp = new Array(this.todos.length);
        this.todos.forEach(function (element) {
            _this.temp[element.id] = [];
            _this.temp[element.id][6] = element.timeTaken;
            _this.temp[element.id][7] = 0;
        });
    };
    TodoComponent.prototype.saveTime = function (id) {
        var _this = this;
        console.dir(this.temp);
        this.todos.forEach(function (todo) {
            if (id == todo.id) {
                var sec = ((_this.temp[id][3] * 3600) + (_this.temp[id][4] * 60) + +_this.temp[id][5])
                    - ((_this.temp[id][0] * 3600) + (_this.temp[id][1] * 60) + +_this.temp[id][2]);
                sec -= sec % 60;
                todo.timeTaken += (sec / 60);
            }
        });
    };
    TodoComponent.prototype.play_stop = function (id) {
        if (this.temp[id][7] == 0) {
            this.temp[id][7] = 1;
            var date = new Date();
            this.temp[id][0] = date.getHours();
            this.temp[id][1] = date.getMinutes();
            this.temp[id][2] = date.getSeconds();
        }
        else {
            this.temp[id][7] = 0;
            var date = new Date();
            this.temp[id][3] = date.getHours();
            this.temp[id][4] = date.getMinutes();
            this.temp[id][5] = date.getSeconds();
            this.saveTime(id);
            console.dir(this.temp);
        }
    };
    TodoComponent = __decorate([
        core_1.Component({
            selector: "my-app",
            providers: [todo_service_1.TodoService, status_service_1.StatusService],
            templateUrl: "pages/todo/todo.html",
            styleUrls: ["pages/todo/todo-common.css", "pages/todo/todo.css"]
        }),
        __metadata("design:paramtypes", [router_1.Router,
            router_2.RouterExtensions,
            router_1.ActivatedRoute,
            status_service_1.StatusService,
            todo_service_1.TodoService,
            page_1.Page])
    ], TodoComponent);
    return TodoComponent;
}());
exports.TodoComponent = TodoComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9kby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0b2RvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUFrRDtBQUdsRCwwQ0FBeUQ7QUFDekQsc0RBQStEO0FBQy9ELGdDQUErQjtBQUMvQixxRUFBbUU7QUFFbkUsK0RBQTZEO0FBUzdEO0lBS29CLHVHQUF1RztJQUN2Ryx1QkFBdUI7SUFDdkIsdUJBQXVCO0lBQ3ZCLHdCQUF3QjtJQUN4QixxQkFBcUI7SUFDckIscUJBQXFCO0lBQ3JCLHNCQUFzQjtJQUN0QixrQ0FBa0M7SUFDbEMsc0NBQXNDO0lBRXhELHVCQUVVLE1BQWMsRUFDZCxnQkFBa0MsRUFDbEMsY0FBOEIsRUFDOUIsYUFBNEIsRUFDNUIsV0FBd0IsRUFDeEIsSUFBVTtRQUxWLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUM5QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUM1QixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixTQUFJLEdBQUosSUFBSSxDQUFNO1FBR2xCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0lBQzlCLENBQUM7SUFFRCxnQ0FBUSxHQUFSO1FBQUEsaUJBUUM7UUFQQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDM0MsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQUEsT0FBTztZQUN4QixLQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDM0IsS0FBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQztZQUM3QyxLQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsZ0NBQVEsR0FBUixVQUFTLEVBQU87UUFBaEIsaUJBV0M7UUFWQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7WUFDckIsRUFBRSxDQUFBLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQSxDQUFDO2dCQUNoQixJQUFJLEdBQUcsR0FDUCxDQUFDLENBQUMsS0FBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3NCQUN2RSxDQUFDLENBQUMsS0FBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzVFLEdBQUcsSUFBSSxHQUFHLEdBQUMsRUFBRSxDQUFDO2dCQUNkLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxHQUFHLEdBQUMsRUFBRSxDQUFDLENBQUM7WUFDN0IsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUdELGlDQUFTLEdBQVQsVUFBVSxFQUFPO1FBQ2YsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLElBQUksSUFBSSxHQUFTLElBQUksSUFBSSxFQUFFLENBQUM7WUFDNUIsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDdkMsQ0FBQztRQUFBLElBQUksQ0FBQSxDQUFDO1lBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckIsSUFBSSxJQUFJLEdBQVMsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNyQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pCLENBQUM7SUFFSCxDQUFDO0lBckVVLGFBQWE7UUFQekIsZ0JBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxRQUFRO1lBQ2xCLFNBQVMsRUFBRSxDQUFDLDBCQUFXLEVBQUUsOEJBQWEsQ0FBQztZQUN2QyxXQUFXLEVBQUUsc0JBQXNCO1lBQ25DLFNBQVMsRUFBRSxDQUFDLDRCQUE0QixFQUFFLHFCQUFxQixDQUFDO1NBQ2pFLENBQUM7eUNBbUJrQixlQUFNO1lBQ0kseUJBQWdCO1lBQ2xCLHVCQUFjO1lBQ2YsOEJBQWE7WUFDZiwwQkFBVztZQUNsQixXQUFJO09BdEJULGFBQWEsQ0F1RXpCO0lBQUQsb0JBQUM7Q0FBQSxBQXZFRCxJQXVFQztBQXZFWSxzQ0FBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi8uLi9zaGFyZWQvdXNlci91c2VyXCI7XHJcbmltcG9ydCB7IFVzZXJTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC91c2VyL3VzZXIuc2VydmljZVwiO1xyXG5pbXBvcnQgeyBSb3V0ZXIsIEFjdGl2YXRlZFJvdXRlIH0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xyXG5pbXBvcnQgeyBSb3V0ZXJFeHRlbnNpb25zIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC1hbmd1bGFyL3JvdXRlclwiO1xyXG5pbXBvcnQgeyBQYWdlIH0gZnJvbSBcInVpL3BhZ2VcIjtcclxuaW1wb3J0IHsgU3RhdHVzU2VydmljZSB9IGZyb20gXCIuLi8uLi9zaGFyZWQvc3RhdHVzL3N0YXR1cy5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFRvZG8gfSBmcm9tIFwiLi4vLi4vc2hhcmVkL3RvZG8vdG9kb1wiO1xyXG5pbXBvcnQgeyBUb2RvU2VydmljZSB9IGZyb20gXCIuLi8uLi9zaGFyZWQvdG9kby90b2RvLnNlcnZpY2VcIjtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiBcIm15LWFwcFwiLFxyXG4gIHByb3ZpZGVyczogW1RvZG9TZXJ2aWNlLCBTdGF0dXNTZXJ2aWNlXSxcclxuICB0ZW1wbGF0ZVVybDogXCJwYWdlcy90b2RvL3RvZG8uaHRtbFwiLFxyXG4gIHN0eWxlVXJsczogW1wicGFnZXMvdG9kby90b2RvLWNvbW1vbi5jc3NcIiwgXCJwYWdlcy90b2RvL3RvZG8uY3NzXCJdXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgVG9kb0NvbXBvbmVudCB7XHJcblxyXG4gIHRvZG9zIDpUb2RvW107XHJcbiAgdGltZXN0YXJ0IDpzdHJpbmc7XHJcbiAgdGVtcCA6bnVtYmVyW11bXTsgLy9kaWVudCB6dXIgdGVtcG9yw6RyZW4gc3BlaWNoZXJ1bmdlbiBkZXIgWmVpdGVyZmFzc3VuZy4gXHJcbiAgICAgICAgICAgICAgICAgICAgLy9FYmVuZSAxIGRlcyBBcnJheXMgaXN0IGFzc296aWF0aXYgbWl0IGRlbiBJRHMgdm9uIGRlbiBUb2Rvcy4gZGllIDIuIEViZW5lIGVudGjDpGx0IGZvbGdlbmRlIEF0dHJpYnV0ZTpcclxuICAgICAgICAgICAgICAgICAgICAvL1swXXN0YXJ0VGltZTogU3R1bmRlblxyXG4gICAgICAgICAgICAgICAgICAgIC8vWzFdc3RhcnRUaW1lOiBNaW51dGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9bMl1zdGFydFRpbWU6IFNla3VuZGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9bM11lbmRUaW1lOiBTdHVuZGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9bNF1lbmRUaW1lOiBNaW51dGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9bNV1lbmRUaW1lOiBTZWt1bmRlblxyXG4gICAgICAgICAgICAgICAgICAgIC8vWzZdZXJyZWNobmV0ZSBkYXVlciBkZXMgRWludHJhZ3NcclxuICAgICAgICAgICAgICAgICAgICAvL1s3XVRpbWVyUnVubmluZyA6MCA9IGZhbHNlLCAxID0gdHJ1ZVxyXG5cclxuICBjb25zdHJ1Y3RvclxyXG4gIChcclxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXHJcbiAgICBwcml2YXRlIHJvdXRlckV4dGVuc2lvbnM6IFJvdXRlckV4dGVuc2lvbnMsXHJcbiAgICBwcml2YXRlIGFjdGl2YXRlZFJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcclxuICAgIHByaXZhdGUgc3RhdHVzU2VydmljZSA6U3RhdHVzU2VydmljZSxcclxuICAgIHByaXZhdGUgdG9kb1NlcnZpY2UgOlRvZG9TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBwYWdlOiBQYWdlXHJcbiAgKVxyXG4gIHtcclxuICAgIHBhZ2UuYWN0aW9uQmFySGlkZGVuID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy50b2RvcyA9IHRoaXMudG9kb1NlcnZpY2UudG9kb3NEdW1teSgpO1xyXG4gICAgdGhpcy50ZW1wID0gbmV3IEFycmF5KHRoaXMudG9kb3MubGVuZ3RoKTtcclxuICAgIHRoaXMudG9kb3MuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgdGhpcy50ZW1wW2VsZW1lbnQuaWRdID0gW107XHJcbiAgICAgIHRoaXMudGVtcFtlbGVtZW50LmlkXVs2XSA9IGVsZW1lbnQudGltZVRha2VuO1xyXG4gICAgICB0aGlzLnRlbXBbZWxlbWVudC5pZF1bN10gPSAwO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzYXZlVGltZShpZCA6YW55KXtcclxuICAgIGNvbnNvbGUuZGlyKHRoaXMudGVtcCk7XHJcbiAgICB0aGlzLnRvZG9zLmZvckVhY2godG9kbyA9PiB7XHJcbiAgICAgIGlmKGlkID09IHRvZG8uaWQpe1xyXG4gICAgICAgIGxldCBzZWMgOm51bWJlciA9IFxyXG4gICAgICAgICgodGhpcy50ZW1wW2lkXVszXSAqIDM2MDApICsgKHRoaXMudGVtcFtpZF1bNF0gKiA2MCkgKyArdGhpcy50ZW1wW2lkXVs1XSkgXHJcbiAgICAgICAgLSAoKHRoaXMudGVtcFtpZF1bMF0gKiAzNjAwKSArICh0aGlzLnRlbXBbaWRdWzFdICogNjApICsgK3RoaXMudGVtcFtpZF1bMl0pO1xyXG4gICAgICAgIHNlYyAtPSBzZWMlNjA7XHJcbiAgICAgICAgdG9kby50aW1lVGFrZW4gKz0gKHNlYy82MCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIHBsYXlfc3RvcChpZCA6YW55KXtcclxuICAgIGlmKHRoaXMudGVtcFtpZF1bN10gPT0gMCl7XHJcbiAgICAgIHRoaXMudGVtcFtpZF1bN10gPSAxO1xyXG4gICAgICBsZXQgZGF0ZSA6RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIHRoaXMudGVtcFtpZF1bMF0gPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgIHRoaXMudGVtcFtpZF1bMV0gPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgdGhpcy50ZW1wW2lkXVsyXSA9IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIHRoaXMudGVtcFtpZF1bN10gPSAwO1xyXG4gICAgICBsZXQgZGF0ZSA6RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIHRoaXMudGVtcFtpZF1bM10gPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgIHRoaXMudGVtcFtpZF1bNF0gPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgdGhpcy50ZW1wW2lkXVs1XSA9IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICB0aGlzLnNhdmVUaW1lKGlkKTtcclxuICAgICAgY29uc29sZS5kaXIodGhpcy50ZW1wKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxufVxyXG4iXX0=